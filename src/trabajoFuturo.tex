\label{ch:trabajoFuturo}
\chapter{Trabajo Futuro y Conclusiones}
\section{Discusión}
Límites de la solución propuesta\newline

Las limitaciones de la solución propuesta se enmarcan en: políticas evaluables y
características del lenguaje Jif.\\
Por un lado, se propone un esquema de anotación con niveles de seguridad alto y
bajo, que permite definir y evaluar políticas de confidencialidad en aplicativos
Android mediante el sistema de anotaciones de Jif.
Sin embargo, el esquema de anotación propuesto no permite evaluar políticas de
integridad ni aplicar mecanismos Downgrading, características ofrecidas por el
sistema de anotaciones de Jif.

Por otro lado, están las limitaciones propias del lenguaje Jif, es decir,
características para el lenguaje Java estándar que aún no están soportadas por
el compilador de Jif, y que por tanto, impiden analizar el flujo de información
de aplicativos Android que requieran de tales características del lenguaje Java.
Más específicamente, se hace referencia a las limitaciones descritas en
\ref{sec:limitaciones}: nested clases, initializer blocks, threads, etc.


% \subsection{Analizar flujo de información de aplicaciones Android mediante Jif:}
% - Si bien, con el prototipo de anotación se evita la anotación manual del
% aplicativo Android, mediante el sistema de anotaciones de Jif, el trabajo
% subyacente para generar tal anotación implica grandes retos, entre ellos:\newline
% -la versión java del programa debe ser pensada e implementada mediante el
% sistema de anotaciones de Jif, es decir, se debe aprender a implementar
% aplicativos en jif, y para esto, la documentación existente es poca.\newline
% - Para generar la versión Jif del programa, se deben anotar una serie de clases
% de la Api de Android.\newline
% - No todas las características del lenguaje Java son soportadas.

\subsection{Qué tanto cambia el código original con las anotaciones}
\label{subsec:cambios}
En el diseño de la solución se describieron los retos
técnicos \ref{sec:limitaciones} que implica anotar código Android, y cómo
superar algunos de estos. Específicamente, las limitaciones para las que se propone un
mecanismo que permita soportarlas son: Statement @Override; Casting entre tipos
EditText y View; Clase Nested R y Enhanced for loop.
% 
% Dentro de las limitaciones técnicas \ref{sec:limitaciones} descritas en el
% diseño de la solución, se describieron una serie de limitaciones para generar la
% versión Jif del programa Android a analizar. Para algunas de tales limitaciones
% se propuso un mécanismo que permita soportarlas, estas son:
% \begin{itemize}
%   \item Statement @Override
%   \item Casting entre tipos EditText y View
%   \item Clase Nested R 
%   \item Enhanced for loop
% \end{itemize}
Adicionalmente, se describió que el compilador de Jif exige la declaración del
chequeo de excepciones tipo runtime, en programas que lo
requieran \ref{subsec:consVerPol}. Ahora, cumplir con los requisitos del
compilador de Jif y aplicar mecanismos que soporten tales limitaciones, implica
una serie de transformaciones en el código fuente del programa Android a
analizar, tanto en la etapa previa a la anotación como en la anotación
misma, es decir, las anotaciones generadas mediante el prototipo de anotación 
que se propone para aspectos de evaluación.\newline
% para soportar tales limitaciones y
% cumplir con los requisitos del compilador de Jif, el código fuente del programa
% Android a analizar, pasa por una serie de transformaciones tanto en la etapa
% previa a la anotación como en la anotación misma.\newline
Previa a la anotación, se deben garantizar dos cosas: primero se deben adicionar
las runtime exceptions necesarias en el programa, segundo, cuando se requiera el
uso de bucles for, se debe usar la versión sencilla y no la versión mejorada del
mismo(Enhanced for loop).\newline 
Durante la anotación, además de aplicar los criterios de anotación definidos en
el diseño de la solución \ref{subsec:pasosSol}, se aplican los mecanismos
propuestos para soportar el Statement @Override, Casting entre tipos EditText y
View; y Clase Nested R. Así, en el caso de  la sentencia Statement @Override, se
comenta la línea que lo contenga; para el casting entre tipos EditText y View,
la información implicada en este tipo de casting es abstraída mediante un tipo
de dato String; finalmente para la clase nested R se crea una clase que define
los define los recursos utilizados por la aplicación a través de variables.\newline 
Si bien, la idea que fundamenta el diseño de la solución consiste en generar la
versión Jif del aplicativo Android a analizar, lo cual se traduce en adicionar
las anotaciones correspondientes para evaluar determinada política de seguridad,
de modo que el compilador de Jif entienda el programa y permita analizar el
flujo de información en el mismo; no es suficiente con sólo anotar el código, en
otras palabras, sin los ajustes previamente mencionados, el compilador genera
error.\newline
Por otro lado, lo positivo es que tales ajustes no alteran la lógica del
programa.


\section{Trabajo Futuro}
Cómo puede ser extendido el trabajo y qué beneficios tendría esa
extensión\newline

Exceptuando las características del lenguaje Java que no son soportadas por el
compilador de Jif(nested clases, initializer blocks,
threads)\ref{sec:limitaciones}, se podría ampliar el setup de Jif para clases
de la API de Android, de modo que se brinde soporte mediante el sistema de
anotaciones de Jif a la mayor cantidad de clases posibles de la API.
Esto permitiría hacer análisis de flujo de información a aplicaciones
Android más robustas.\newline 
El esquema de anotación propuesto podría ser extendido para definir y analizar
políticas de integridad y mecanismos adicionales como declasificación y
endorsement, verificables mediante el modelo de anotaciones de Jif. De este modo,
el desarrollador también podría garantizar el cumplimiento de políticas de
integridad, y contaría con mecanismos que le permitan flexibilizar la definición
de las políticas tanto de confidencialidad como de integridad.


% Tomado de la propuesta de solución:\newline
% Por último, cabe anotar que aunque la presente propuesta está centrada en
% verificar políticas de confidencialidad, en caso de contar con el tiempo
% prudente, sería interesante analizar políticas adicionales como por ejemplo,
% integridad y declasificación, pues estas son verificables mediante el modelo de
% evaluación de JIF, modelo del que parte la herramienta de evaluación planteada.

\section{Conclusiones}
El presente trabajo de investigación ha abordado la problemática enfrentada por
el desarrollador de aplicaciones Android, a la hora de definir políticas de
seguridad que regulen el flujo de información de sus aplicaciones. Puesto que,
aún cuando la API Android ofrece mecanismos de control de acceso y el
desarrollador puede implementarlos en sus aplicaciones, estos se centran en
regular acceso de los usuarios a determinados recursos del sistema, y no en
verificar qué sucede con la información una vez se accede a ella.

Buscando contribuir con la solución de tal problemática, se propone una
herramienta de análisis estático basada en el sistema de anotaciones de Jif, que
permita analizar flujo de información en aplicativos Android. El diseño ideal
para la propuesta de solución, implica extender el setup de Jif para la API de
Android e incluir un clasificador de sources y sinks. Sin embargo, para efectos
de la presente tesis se limita el setup y el conjunto de sources y sinks, acorde
a una política de confidencialidad específica.

El diseño de solución en que se hace énfasis para la herramienta de análisis
estático, es evaluado y los resultados obtenidos son comparados frente a otras
herramientas de análisis estático: FlowDroid y Jodroid. Partiendo de los tipos
de análisis y técnicas evaluadas, de sus ventajas y desventajas, se
puede concluir:\newline 
- Con el sistema de anotaciones de Jif es posible proveer una herramienta de
apoyo al desarrollador de aplicaciones Android, de tal manera que evalúe el
cumplimiento de políticas de seguridad desde la construcción de sus aplicativos.\\
No obstante, el desarrollador debe adquirir un conocimiento previo de la
implementación de aplicativos en Jif.\\
- Al estar basado en análisis de flujo de información, Jif analiza tanto flujos
explícitos como flujos implícitos, ofreciendo la ventaja de detectar fugas de
información a través de flujos implícitos, sin que se requiera trabajo adicional
para que el análisis incluya tales flujos. Contrario a lo que sucede con las
técnicas de análisis tainting, pues para incluir flujos implícitos en el
análisis, se requiere especificar casos que propaguen el marcado de datos a
través de dichos flujos.\\
- Al tratarse de análisis de flujo de información mediante lenguajes tipados de
seguridad, se obtienen las ventajas de desempeño y completitud en el análisis,
pero al mismo tiempo se obtiene como desventaja una baja precisión.\newline 
Las ventajas de desempeño obedecen a que el análisis se centra en técnicas de
chequeo de tipos(label checking), que corresponden a etapas de compilación
implicando bajo costo en desempeño.\newline
La completitud en el análisis se obtiene  haciendo seguimiento al flujo de
información de inicio a fin del aplicativo\cite{LanguageIFS-2013}, incluyendo
tanto flujos implícitos como flujos explícitos, reportando menos falsos negativos.\newline
La baja precisión en el análisis obedece a un enfoque de análisis pesimista,
en el que, al incluir todas las posibles ramas de ejecución, se generan más
falsos positivos.\newline

Además de las ventajas y desventajas anteriormente mencionadas, extender el
setup de Jif para Android como se propone en el diseño de solución ideal,
implica una serie de retos importantes, entre ellos:\newline 
- Implementar las clases de la API Android mediante el sistema de anotaciones de
Jif no es tarea sencilla, porque se requiere experticia en el funcionamiento del
sistema de anotaciones y el lenguaje de anotación Jif. Tal apreciación no es
exclusiva del presente trabajo, puesto que, propuestas basadas en la
implementación de aplicativos Java mediante Jif, como
JPmail\cite{Hicks06fromlanguages}[page 10] coinciden en resaltar dicha
dificultad.\newline
- En algunos casos también se requiere extender el setup de Jif para clases del
lenguaje Java estándar. Por ejemplo, es necesario dar soporte a las clases
java.lang.Override, tal como se describe en \ref{sub:override}.\\
- Para aspectos del código que definitivamente no puedan ser soportadas
mediante el sistema de anotaciones de Jif, se debe optar por un mecanismo que
permita soportarlas por ejemplo, como se menciona en \ref{subsec:cambios}.
% 
% 
% 
% 
% 
% porque además de requerirse la implementación de las clases de la
% API de Android, mediante el sistema de anotaciones de Jif, se presentan casos
% en que también es necesario extender características del lenguaje Java estándar,
% por ejemplo, es necesario dar soporte a las clases java.lang.Override, tal como
% se describe en \ref{sub:override}.\\
% Adicionalmente, para aspectos del código que definitivamente no puedan ser
% soportadas mediante el sistema de anotaciones de Jif, se debe optar por un
% mecanismo que permita soportarlas por ejemplo, como se menciona en
% \ref{subsec:cambios}.

Por último, aunque el análisis de aplicativos Android mediante el sistema de
anotaciones de Jif es un tema de investigación con bastantes retos por superar,
el presente trabajo evidencia que es posible anotar código de la API Android
mediante Jif, de modo que, el desarrollador verifique el cumplimiento de
determinadas políticas de seguridad, desde la construcción del aplicativo.

%  que no solamente se sintetizan en implementar la versión anotada de
% las clases de la API de Android, sino que también implican extender JIF para que
% reconocozca características del lenguaje Java estandar, y en los casos en que
% definitivamente no se pueda soportar características propias de la API de
% Android mediante el sistema de anotaciones de Jif, es necesario recurrir a 
% 
% 
% Sin embargo, 
% implica una serie de retos técnicos, puesto que, extender el
% setup de Jif para Android, implica no solamente implementar la versión anotada
% de las clases de la API, sino que también implica extender un conj\newline
% 
% XXXXXXXXXXXX
% en la labor del desarrollador de aplicaciones Android, de
% modo que este pueda garantizar el cumplimiento de determinadas políticas de
% seguridad, en el presente trabajo se exploró el análisis de flujo de información
% en aplicaciones Android, mediante técnicas de lenguajes tipados de seguridad,
% específicamente mediante el sistema de anotaciones de Jif.\newline 
% Acorde a la literatura científica consultada, el análisis de aplicaciones
% Android mediante el sistema de anotaciones de Jif, es una opción no antes
% explorada.\newline
% Habiendo superado una serie de limitaciones técnicas, se implementó un
% prototipo de anotación, y se comparó con otras herramientas de
% análisis(FlowDroid y JoDroid).
% Partiendo de los tipos de análisis y técnicas evaluadas, de sus ventajas y
% desventajas, soportadas no solamente en los resultados de evaluación sino
% también en la literatura científica, es posible decir que 



